<!-- src/app/componants/userhome/publish/publish.component.html -->

<div class="create-post">
  <div class="row">
    <div class="col-md-7 col-sm-7">
      <div class="form-group">

        <!-- ✅ صورة اليوزر من /me -->
        <img
          [src]="userImage"
          alt="user"
          class="profile-photo-md" />

        <textarea
          [(ngModel)]="text"
          name="texts"
          cols="30"
          rows="1"
          class="form-control"
          placeholder="Write what you wish">
        </textarea>

        <small class="text-danger" *ngIf="errorMsg">{{ errorMsg }}</small>

        <!-- Preview اختياري -->
        <div *ngIf="previewUrls.length" style="margin-top:10px;">
          <div *ngFor="let u of previewUrls" style="display:inline-block;margin-right:8px;">
            <img
              *ngIf="u && u.startsWith('blob:')"
              [src]="u"
              style="width:70px;height:70px;object-fit:cover;border-radius:6px;" />
          </div>

          <div style="margin-top:6px;" class="text-muted">
            {{ selectedFiles.length }} file(s) selected
          </div>
        </div>

      </div>
    </div>

    <div class="col-md-5 col-sm-5">
      <div class="tools">
        <ul class="publishing-tools list-inline">
          <li>
            <a href="javascript:void(0)" (click)="chooseImage()"><i class="ion-images"></i></a>
          </li>
          <li>
            <a href="javascript:void(0)" (click)="chooseVideo()"><i class="ion-ios-videocam"></i></a>
          </li>
          <li>
            <a href="javascript:void(0)" (click)="clearMedia()"><i class="ion-close"></i></a>
          </li>
        </ul>

        <input
          #imageInput
          type="file"
          accept="image/*"
          multiple
          style="display:none"
          (change)="onFileSelected($event)" />

        <input
          #videoInput
          type="file"
          accept="video/*"
          multiple
          style="display:none"
          (change)="onFileSelected($event)" />

        <button
          class="btn btn-primary pull-right"
          (click)="publish()"
          [disabled]="submitting || !canPublish()">
          {{ submitting ? 'Publishing...' : 'Publish' }}
        </button>
      </div>
    </div>
  </div>
</div>
